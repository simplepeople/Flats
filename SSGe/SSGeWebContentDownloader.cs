using Core;

namespace SSGe;

public class SSGeWebContentDownloader : IContentDownloader
{
    public async Task<List<Content>> Get()
    {
        var links = new List<(Tag[] tags, string link)>
        {
            (new[] { Tag.SSGe, Tag.Batumi, Tag.Flat },
                "https://ss.ge/ru/%D0%BD%D0%B5%D0%B4%D0%B2%D0%B8%D0%B6%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D1%8C/l/%D0%9A%D0%B2%D0%B0%D1%80%D1%82%D0%B8%D1%80%D0%B0/%D0%90%D1%80%D0%B5%D0%BD%D0%B4%D0%B0?CurrentUserId=&Query=&MunicipalityId=&CityIdList=96&subdistr=&stId=&PrcSource=2&StatusField.FieldId=34&StatusField.Type=SingleSelect&StatusField.StandardField=Status&StatusField.SelectedValues=1&StatusField.SelectedValues=2&QuantityFrom=70&QuantityTo=&Rooms=3&Rooms=4&Rooms=5&Rooms=6&PriceType=false&CurrencyId=2&PriceFrom=200&PriceTo=1500&Context.Request.Query%5BQuery%5D=&WithImageOnly=true&Fields%5B3%5D.FieldId=151&Fields%5B3%5D.Type=SingleSelect&Fields%5B3%5D.StandardField=None&Fields%5B4%5D.FieldId=150&Fields%5B4%5D.Type=SingleSelect&Fields%5B4%5D.StandardField=None&Fields%5B5%5D.FieldId=152&Fields%5B5%5D.Type=SingleSelect&Fields%5B5%5D.StandardField=None&Fields%5B6%5D.FieldId=29&Fields%5B6%5D.Type=SingleSelect&Fields%5B6%5D.StandardField=None&Fields%5B7%5D.FieldId=153&Fields%5B7%5D.Type=MultiSelect&Fields%5B7%5D.StandardField=None&Fields%5B8%5D.FieldId=30&Fields%5B8%5D.Type=SingleSelect&Fields%5B8%5D.StandardField=None&Fields%5B0%5D.FieldId=48&Fields%5B0%5D.Type=Number&Fields%5B0%5D.StandardField=None&Fields%5B0%5D.ValueFrom=&Fields%5B0%5D.ValueTo=&Fields%5B1%5D.FieldId=146&Fields%5B1%5D.Type=Number&Fields%5B1%5D.StandardField=None&Fields%5B1%5D.ValueFrom=&Fields%5B1%5D.ValueTo=&Fields%5B2%5D.FieldId=28&Fields%5B2%5D.Type=Number&Fields%5B2%5D.StandardField=Floor&Fields%5B2%5D.ValueFrom=&Fields%5B2%5D.ValueTo=&Fields%5B9%5D.FieldId=15&Fields%5B9%5D.Type=Group&Fields%5B9%5D.StandardField=None&Fields%5B9%5D.Values%5B0%5D.Value=35&Fields%5B9%5D.Values%5B0%5D.Selected=true&Fields%5B9%5D.Values%5B1%5D.Value=36&Fields%5B9%5D.Values%5B1%5D.Selected=true&Fields%5B9%5D.Values%5B2%5D.Value=37&Fields%5B9%5D.Values%5B3%5D.Value=38&Fields%5B9%5D.Values%5B4%5D.Value=39&Fields%5B9%5D.Values%5B5%5D.Value=40&Fields%5B9%5D.Values%5B6%5D.Value=41&Fields%5B9%5D.Values%5B7%5D.Value=42&Fields%5B9%5D.Values%5B8%5D.Value=24&Fields%5B9%5D.Values%5B9%5D.Value=27&Fields%5B9%5D.Values%5B10%5D.Value=22&Fields%5B9%5D.Values%5B10%5D.Selected=true&Fields%5B9%5D.Values%5B11%5D.Value=20&Fields%5B9%5D.Values%5B12%5D.Value=8&Fields%5B9%5D.Values%5B13%5D.Value=6&Fields%5B9%5D.Values%5B14%5D.Value=4&Fields%5B9%5D.Values%5B15%5D.Value=5&Fields%5B9%5D.Values%5B16%5D.Value=9&Fields%5B9%5D.Values%5B17%5D.Value=3&Fields%5B9%5D.Values%5B18%5D.Value=120&AgencyId=&VipStatus=&Sort.SortExpression=%22OrderDate%22+DESC&Fields%5B9%5D.Values%5B0%5D.Selected=false&Fields%5B9%5D.Values%5B1%5D.Selected=false&Fields%5B9%5D.Values%5B2%5D.Selected=false&Fields%5B9%5D.Values%5B3%5D.Selected=false&Fields%5B9%5D.Values%5B4%5D.Selected=false&Fields%5B9%5D.Values%5B5%5D.Selected=false&Fields%5B9%5D.Values%5B6%5D.Selected=false&Fields%5B9%5D.Values%5B7%5D.Selected=false&Fields%5B9%5D.Values%5B8%5D.Selected=false&Fields%5B9%5D.Values%5B9%5D.Selected=false&Fields%5B9%5D.Values%5B10%5D.Selected=false&Fields%5B9%5D.Values%5B11%5D.Selected=false&Fields%5B9%5D.Values%5B12%5D.Selected=false&Fields%5B9%5D.Values%5B13%5D.Selected=false&Fields%5B9%5D.Values%5B14%5D.Selected=false&Fields%5B9%5D.Values%5B15%5D.Selected=false&Fields%5B9%5D.Values%5B16%5D.Selected=false&Fields%5B9%5D.Values%5B17%5D.Selected=false&Fields%5B9%5D.Values%5B18%5D.Selected=false"),
            // (new[] { Tag.SSGe, Tag.Batumi, Tag.House },
            //     "https://ss.ge/ru/%D0%BD%D0%B5%D0%B4%D0%B2%D0%B8%D0%B6%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D1%8C/l/%D0%94%D0%BE%D0%BC/%D0%90%D1%80%D0%B5%D0%BD%D0%B4%D0%B0?CurrentUserId=&Query=&MunicipalityId=&CityIdList=96&subdistr=&stId=&PrcSource=2&StatusField.FieldId=34&StatusField.Type=SingleSelect&StatusField.StandardField=Status&QuantityFrom=40&QuantityTo=&Rooms=3&Rooms=4&Rooms=5&Rooms=6&PriceType=false&CurrencyId=2&PriceFrom=300&PriceTo=1500&Context.Request.Query%5BQuery%5D=&WithImageOnly=true&Fields%5B2%5D.FieldId=30&Fields%5B2%5D.Type=SingleSelect&Fields%5B2%5D.StandardField=None&Fields%5B0%5D.FieldId=48&Fields%5B0%5D.Type=Number&Fields%5B0%5D.StandardField=None&Fields%5B0%5D.ValueFrom=&Fields%5B0%5D.ValueTo=&Fields%5B1%5D.FieldId=33&Fields%5B1%5D.Type=Number&Fields%5B1%5D.StandardField=Area&Fields%5B1%5D.ValueFrom=&Fields%5B1%5D.ValueTo=&Fields%5B3%5D.FieldId=17&Fields%5B3%5D.Type=Group&Fields%5B3%5D.StandardField=None&Fields%5B3%5D.Values%5B0%5D.Value=35&Fields%5B3%5D.Values%5B0%5D.Selected=false&Fields%5B3%5D.Values%5B1%5D.Value=36&Fields%5B3%5D.Values%5B1%5D.Selected=false&Fields%5B3%5D.Values%5B2%5D.Value=37&Fields%5B3%5D.Values%5B2%5D.Selected=false&Fields%5B3%5D.Values%5B3%5D.Value=38&Fields%5B3%5D.Values%5B3%5D.Selected=false&Fields%5B3%5D.Values%5B4%5D.Value=39&Fields%5B3%5D.Values%5B4%5D.Selected=false&Fields%5B3%5D.Values%5B5%5D.Value=40&Fields%5B3%5D.Values%5B5%5D.Selected=false&Fields%5B3%5D.Values%5B6%5D.Value=41&Fields%5B3%5D.Values%5B6%5D.Selected=false&Fields%5B3%5D.Values%5B7%5D.Value=42&Fields%5B3%5D.Values%5B7%5D.Selected=false&Fields%5B3%5D.Values%5B8%5D.Value=24&Fields%5B3%5D.Values%5B8%5D.Selected=false&Fields%5B3%5D.Values%5B9%5D.Value=27&Fields%5B3%5D.Values%5B9%5D.Selected=false&Fields%5B3%5D.Values%5B10%5D.Value=22&Fields%5B3%5D.Values%5B10%5D.Selected=false&Fields%5B3%5D.Values%5B11%5D.Value=20&Fields%5B3%5D.Values%5B11%5D.Selected=false&Fields%5B3%5D.Values%5B12%5D.Value=8&Fields%5B3%5D.Values%5B12%5D.Selected=false&Fields%5B3%5D.Values%5B13%5D.Value=6&Fields%5B3%5D.Values%5B13%5D.Selected=false&Fields%5B3%5D.Values%5B14%5D.Value=4&Fields%5B3%5D.Values%5B14%5D.Selected=false&Fields%5B3%5D.Values%5B15%5D.Value=5&Fields%5B3%5D.Values%5B15%5D.Selected=false&Fields%5B3%5D.Values%5B16%5D.Value=9&Fields%5B3%5D.Values%5B16%5D.Selected=false&Fields%5B3%5D.Values%5B17%5D.Value=3&Fields%5B3%5D.Values%5B17%5D.Selected=false&Fields%5B3%5D.Values%5B18%5D.Value=2&Fields%5B3%5D.Values%5B18%5D.Selected=false&Fields%5B3%5D.Values%5B19%5D.Value=1&Fields%5B3%5D.Values%5B19%5D.Selected=false&AgencyId=&VipStatus=&Sort.SortExpression=%22OrderDate%22+DESC&Fields%5B9%5D.Values%5B0%5D.Selected=false&Fields%5B9%5D.Values%5B1%5D.Selected=false&Fields%5B9%5D.Values%5B2%5D.Selected=false&Fields%5B9%5D.Values%5B3%5D.Selected=false&Fields%5B9%5D.Values%5B4%5D.Selected=false&Fields%5B9%5D.Values%5B5%5D.Selected=false&Fields%5B9%5D.Values%5B6%5D.Selected=false&Fields%5B9%5D.Values%5B7%5D.Selected=false&Fields%5B9%5D.Values%5B8%5D.Selected=false&Fields%5B9%5D.Values%5B9%5D.Selected=false&Fields%5B9%5D.Values%5B10%5D.Selected=false&Fields%5B9%5D.Values%5B11%5D.Selected=false&Fields%5B9%5D.Values%5B12%5D.Selected=false&Fields%5B9%5D.Values%5B13%5D.Selected=false&Fields%5B9%5D.Values%5B14%5D.Selected=false&Fields%5B9%5D.Values%5B15%5D.Selected=false&Fields%5B9%5D.Values%5B16%5D.Selected=false&Fields%5B9%5D.Values%5B17%5D.Selected=false&Fields%5B9%5D.Values%5B18%5D.Selected=false"),
            // (new [] {Tag.SSGe, Tag.Batumi, Tag.Single },
            // "https://ss.ge/ru/%D0%BD%D0%B5%D0%B4%D0%B2%D0%B8%D0%B6%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D1%8C/l/%D0%9A%D0%B2%D0%B0%D1%80%D1%82%D0%B8%D1%80%D0%B0/%D0%90%D1%80%D0%B5%D0%BD%D0%B4%D0%B0?CurrentUserId=&Query=&MunicipalityId=&CityIdList=96&subdistr=&stId=&PrcSource=2&StatusField.FieldId=34&StatusField.Type=SingleSelect&StatusField.StandardField=Status&StatusField.SelectedValues=1&StatusField.SelectedValues=2&QuantityFrom=&QuantityTo=&Rooms=1&PriceType=false&CurrencyId=2&PriceFrom=100&PriceTo=400&Context.Request.Query%5BQuery%5D=&WithImageOnly=true&Fields%5B3%5D.FieldId=151&Fields%5B3%5D.Type=SingleSelect&Fields%5B3%5D.StandardField=None&Fields%5B4%5D.FieldId=150&Fields%5B4%5D.Type=SingleSelect&Fields%5B4%5D.StandardField=None&Fields%5B5%5D.FieldId=152&Fields%5B5%5D.Type=SingleSelect&Fields%5B5%5D.StandardField=None&Fields%5B6%5D.FieldId=29&Fields%5B6%5D.Type=SingleSelect&Fields%5B6%5D.StandardField=None&Fields%5B7%5D.FieldId=153&Fields%5B7%5D.Type=MultiSelect&Fields%5B7%5D.StandardField=None&Fields%5B8%5D.FieldId=30&Fields%5B8%5D.Type=SingleSelect&Fields%5B8%5D.StandardField=None&Fields%5B0%5D.FieldId=48&Fields%5B0%5D.Type=Number&Fields%5B0%5D.StandardField=None&Fields%5B0%5D.ValueFrom=&Fields%5B0%5D.ValueTo=&Fields%5B1%5D.FieldId=146&Fields%5B1%5D.Type=Number&Fields%5B1%5D.StandardField=None&Fields%5B1%5D.ValueFrom=&Fields%5B1%5D.ValueTo=&Fields%5B2%5D.FieldId=28&Fields%5B2%5D.Type=Number&Fields%5B2%5D.StandardField=Floor&Fields%5B2%5D.ValueFrom=&Fields%5B2%5D.ValueTo=&Fields%5B9%5D.FieldId=15&Fields%5B9%5D.Type=Group&Fields%5B9%5D.StandardField=None&Fields%5B9%5D.Values%5B0%5D.Value=35&Fields%5B9%5D.Values%5B0%5D.Selected=true&Fields%5B9%5D.Values%5B1%5D.Value=36&Fields%5B9%5D.Values%5B1%5D.Selected=true&Fields%5B9%5D.Values%5B2%5D.Value=37&Fields%5B9%5D.Values%5B3%5D.Value=38&Fields%5B9%5D.Values%5B4%5D.Value=39&Fields%5B9%5D.Values%5B5%5D.Value=40&Fields%5B9%5D.Values%5B6%5D.Value=41&Fields%5B9%5D.Values%5B7%5D.Value=42&Fields%5B9%5D.Values%5B8%5D.Value=24&Fields%5B9%5D.Values%5B9%5D.Value=27&Fields%5B9%5D.Values%5B10%5D.Value=22&Fields%5B9%5D.Values%5B10%5D.Selected=true&Fields%5B9%5D.Values%5B11%5D.Value=20&Fields%5B9%5D.Values%5B12%5D.Value=8&Fields%5B9%5D.Values%5B13%5D.Value=6&Fields%5B9%5D.Values%5B14%5D.Value=4&Fields%5B9%5D.Values%5B15%5D.Value=5&Fields%5B9%5D.Values%5B16%5D.Value=9&Fields%5B9%5D.Values%5B17%5D.Value=3&Fields%5B9%5D.Values%5B18%5D.Value=120&ConstructionAgencyId=&AgencyId=&VipStatus=&Sort.SortExpression=%22OrderDate%22+DESC&Fields%5B9%5D.Values%5B0%5D.Selected=false&Fields%5B9%5D.Values%5B1%5D.Selected=false&Fields%5B9%5D.Values%5B2%5D.Selected=false&Fields%5B9%5D.Values%5B3%5D.Selected=false&Fields%5B9%5D.Values%5B4%5D.Selected=false&Fields%5B9%5D.Values%5B5%5D.Selected=false&Fields%5B9%5D.Values%5B6%5D.Selected=false&Fields%5B9%5D.Values%5B7%5D.Selected=false&Fields%5B9%5D.Values%5B8%5D.Selected=false&Fields%5B9%5D.Values%5B9%5D.Selected=false&Fields%5B9%5D.Values%5B10%5D.Selected=false&Fields%5B9%5D.Values%5B11%5D.Selected=false&Fields%5B9%5D.Values%5B12%5D.Selected=false&Fields%5B9%5D.Values%5B13%5D.Selected=false&Fields%5B9%5D.Values%5B14%5D.Selected=false&Fields%5B9%5D.Values%5B15%5D.Selected=false&Fields%5B9%5D.Values%5B16%5D.Selected=false&Fields%5B9%5D.Values%5B17%5D.Selected=false&Fields%5B9%5D.Values%5B18%5D.Selected=false")
        };

        var contents = new List<Content>(links.Count);
        foreach (var link in links)
        {
            var responseString = await new HttpClient().GetStringAsync(link.link);
            await Task.Delay(5000);
            contents.Add(new Content
            {
                HtmlText = responseString,
                Tags = link.tags
            });
        }

        return contents;
    }
}